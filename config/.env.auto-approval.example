# Auto-Approval Configuration for Bulk Import
# TRACK-012: Configurable Auto-Approval Rules
#
# These environment variables control when imports are automatically approved.
# All confidence values are between 0.0 and 1.0

# Minimum overall quality score required for auto-approval
# Default: 0.90 (EXCELLENT tier)
# Recommended range: 0.85-0.95
AUTO_APPROVAL_MIN_QUALITY_SCORE=0.90

# Minimum composer resolution confidence
# Default: 0.95 (HIGH confidence)
# This ensures we only auto-approve when composer is very confidently matched
AUTO_APPROVAL_MIN_COMPOSER_CONFIDENCE=0.95

# Minimum raga resolution confidence
# Default: 0.90
# Slightly lower than composer as ragas may have more variation
AUTO_APPROVAL_MIN_RAGA_CONFIDENCE=0.90

# Minimum tala resolution confidence
# Default: 0.85
# Tala is less critical, so threshold can be lower
AUTO_APPROVAL_MIN_TALA_CONFIDENCE=0.85

# Require composer to be resolved with high confidence for auto-approval
# Default: true
# Set to false to allow auto-approval even when composer confidence is low
AUTO_APPROVAL_REQUIRE_COMPOSER=true

# Require raga to be resolved with high confidence for auto-approval
# Default: true
# Set to false to allow auto-approval even when raga is unresolved
AUTO_APPROVAL_REQUIRE_RAGA=true

# Allow auto-approval even if it would create new entities (composer/raga/tala)
# Default: false (only auto-approve if entities already exist)
# Set to true to allow creation of new entities during auto-approval
AUTO_APPROVAL_ALLOW_NEW_ENTITIES=false

# Quality tiers eligible for auto-approval (comma-separated)
# Default: EXCELLENT,GOOD
# Options: EXCELLENT (≥0.90), GOOD (≥0.75), FAIR (≥0.60), POOR (<0.60)
AUTO_APPROVAL_QUALITY_TIERS=EXCELLENT,GOOD

# Require minimal metadata (title and lyrics) for auto-approval
# Default: true
# Set to false to allow auto-approval even when metadata is incomplete
AUTO_APPROVAL_REQUIRE_METADATA=true

# =====================================================
# PRESET CONFIGURATIONS
# =====================================================

# PRODUCTION (Conservative - Use these for production deployments)
# Only auto-approve extremely high-confidence imports
# AUTO_APPROVAL_MIN_QUALITY_SCORE=0.95
# AUTO_APPROVAL_MIN_COMPOSER_CONFIDENCE=0.98
# AUTO_APPROVAL_MIN_RAGA_CONFIDENCE=0.95
# AUTO_APPROVAL_MIN_TALA_CONFIDENCE=0.90
# AUTO_APPROVAL_REQUIRE_COMPOSER=true
# AUTO_APPROVAL_REQUIRE_RAGA=true
# AUTO_APPROVAL_ALLOW_NEW_ENTITIES=false
# AUTO_APPROVAL_QUALITY_TIERS=EXCELLENT
# AUTO_APPROVAL_REQUIRE_METADATA=true

# DEVELOPMENT (Permissive - Use these for testing/development)
# Allow more imports to be auto-approved for faster testing
# AUTO_APPROVAL_MIN_QUALITY_SCORE=0.80
# AUTO_APPROVAL_MIN_COMPOSER_CONFIDENCE=0.85
# AUTO_APPROVAL_MIN_RAGA_CONFIDENCE=0.80
# AUTO_APPROVAL_MIN_TALA_CONFIDENCE=0.75
# AUTO_APPROVAL_REQUIRE_COMPOSER=true
# AUTO_APPROVAL_REQUIRE_RAGA=false
# AUTO_APPROVAL_ALLOW_NEW_ENTITIES=true
# AUTO_APPROVAL_QUALITY_TIERS=EXCELLENT,GOOD,FAIR
# AUTO_APPROVAL_REQUIRE_METADATA=false

# =====================================================
# NOTES
# =====================================================
#
# 1. Quality Score Calculation:
#    - Completeness: 40% (has title, lyrics, composer, raga, tala)
#    - Resolution Confidence: 30% (entity resolution confidence)
#    - Source Quality: 20% (blogspot.com = 0.8, other = 0.6)
#    - Validation: 10% (passed header validation, URL valid)
#
# 2. Confidence Levels:
#    - HIGH: Exact or very close match (typically > 0.90)
#    - MEDIUM: Possible match (typically 0.70-0.90)
#    - LOW: Weak match (typically < 0.70)
#
# 3. Quality Tiers:
#    - EXCELLENT: Overall score ≥ 0.90
#    - GOOD: Overall score ≥ 0.75
#    - FAIR: Overall score ≥ 0.60
#    - POOR: Overall score < 0.60
#
# 4. Best Practices:
#    - Start with conservative settings in production
#    - Monitor auto-approval rate and adjust as needed
#    - Review rejected imports periodically to tune thresholds
#    - Consider source quality when setting thresholds
#
# 5. Monitoring:
#    - Check logs for "Auto-approving imported krithi" messages
#    - Review auto-approval rate in batch summaries
#    - Analyze quality scores of auto-approved vs manually reviewed items
