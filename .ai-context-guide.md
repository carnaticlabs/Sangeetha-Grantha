# AI Context Files Guide - Kailash Yatra Platform

This repository includes context files for various AI coding assistants. Each file is tailored to the specific capabilities and conventions of different AI tools.

## Available Context Files

### 1. `.chatgpt-config.md`
**For**: ChatGPT (OpenAI Codex)  
**Format**: Markdown with structured sections  
**Purpose**: Comprehensive project configuration including persona, tech stack, patterns, and workflows  
**Best For**: General coding assistance, architecture discussions, code generation

**Key Sections**:
- Project context and module layout
- Current tech stack (canonical versions)
- Development patterns for backend, frontend, and shared code
- Critical constraints and requirements
- Common commands and workflows

### 2. `.cursorrules`
**For**: Cursor AI Editor  
**Format**: Cursor-specific rules format  
**Purpose**: Quick reference guide optimized for inline code assistance  
**Best For**: Real-time coding suggestions, pattern enforcement, quick lookups

**Key Features**:
- Concise technology table
- Core patterns with code examples
- Important constraints highlighted
- Common commands reference
- Module structure overview

### 3. `.aiderignore`
**For**: Aider AI (command-line AI pair programmer)  
**Format**: Gitignore-style patterns  
**Purpose**: Exclude files/directories from AI consideration  
**Best For**: Focusing AI attention on relevant code only

**Excluded**:
- Build outputs (build/, dist/, target/)
- IDE files
- Dependencies (node_modules/)
- Database data
- Archive documentation

### 4. `.windsurf/context.md`
**For**: Windsurf AI  
**Format**: Structured Markdown with code examples  
**Purpose**: Development patterns and architecture guide  
**Best For**: Understanding system architecture, following established patterns

**Highlights**:
- Detailed architecture diagram (ASCII art)
- Comprehensive pattern examples
- Database operations guide
- Documentation references table
- Testing strategies

### 5. `.claude-context.md`
**For**: Claude (Anthropic)  
**Format**: Highly structured Markdown with tables  
**Purpose**: Comprehensive enterprise-level context  
**Best For**: Complex refactoring, architectural decisions, detailed analysis

**Features**:
- Production system overview
- Extensive pattern examples
- Security considerations
- Performance guidelines
- Deployment information
- Error handling strategies

### 6. `.gemini-context.md`
**For**: Google Gemini  
**Format**: Table-heavy structured format  
**Purpose**: Quick reference with visual organization  
**Best For**: Quick lookups, pattern reference, command reference

**Structure**:
- Technology stack table
- Architecture diagram
- Pattern reference with examples
- Rules checklist (DO/DON'T)
- Documentation reference tables
- Quick start checklist

### 7. `.antigravity.md`
**For**: Google Antigravity
**Format**: Markdown with structured sections
**Purpose**: Comprehensive project configuration tailored for Antigravity agent
**Best For**: General coding assistance, complex tasks, and agentic workflows

**Structure**:
- Persona and Project Context
- Tech Stack (Canonical)
- Role & Behavior Guidelines
- Key Development Patterns
- Important Constraints
- Common Commands

## Tooling Updates (Dec 2025)

**Yatra CLI (`tools/yatra-cli/`)**
- Version 0.1.0 (2025-11-27) replaces legacy bash helpers with a Rust CLI that orchestrates setup, dev, and end-to-end verification flows.
- `cargo run -- dev --start-db` now ensures the Rust DB tool is built, Postgres is healthy, the backend passes `/health`, and the React admin console launches for manual smoke checks.
- `cargo run -- test steel-thread` performs DB reset → migrate → seed (`test_data.json`), exercises create/import/dashboard/payment APIs, and leaves backend/frontend running for inspection.

**Karate Integration Tests**
- Deterministic fixtures are seeded via `./gradlew :modules:backend:api:seedTestData` (reads `config/db-config.test.env`; override with `KY_DB_ENV_PATH`).
- Execute suites with `./gradlew :modules:backend:api:test --tests "com.kailashyatra.backend.api.karate.ApiKarateSuite"` or the default `test` task; use `-Dkarate.options="--tags @smoke"` for targeted runs.
- Coverage includes health contracts, OTP auth, admin yatra lifecycle & pagination, participant rosters/payments, and participant self-service flows, ensuring Karate stays aligned with recent API changes.

## Choosing the Right Context File

### For General Development
- **Primary**: `.chatgpt-config.md` or `.claude-context.md`
- **Inline Help**: `.cursorrules`

### For Specific Tasks

| Task | Best Context File |
|------|------------------|
| Code generation | `.chatgpt-config.md` |
| Pattern enforcement | `.cursorrules` |
| Architecture review | `.claude-context.md` |
| Quick reference | `.gemini-context.md` |
| Focus AI scope | `.aiderignore` |
| Full context | `.windsurf/context.md` |

## Common Information Across All Files

All context files include:
- ✅ Current tech stack versions
- ✅ Module structure
- ✅ Key development patterns
- ✅ Critical constraints (e.g., use Rust migrations, NOT Flyway)
- ✅ Common commands
- ✅ Documentation references

## Key Principles (All Files)

### Backend (Kotlin + Ktor)
1. Use `DatabaseFactory.dbQuery { }` for ALL database operations
2. Log ALL mutations to `AUDIT_LOG`
3. Return explicit DTOs, never Exposed entities
4. Keep routes thin, delegate to services

### Frontend (React + TypeScript)
1. Use explicit types (no `any`)
2. Tailwind CSS for styling
3. Functional components with typed props
4. Follow shadcn UI patterns

### Database
1. **Use Rust migration tool** (database/rust/)
2. **NEVER suggest Flyway**
3. PostgreSQL 15+ with UUID, JSONB, enums

### Shared Domain (Kotlin Multiplatform)
1. Mark DTOs with `@Serializable`
2. Use Kotlin datetime (not Java types)
3. Keep enums exhaustive

## Updating Context Files

When project changes:
1. Update `.chatgpt-config.md` first (canonical)
2. Sync key changes to other files
3. Update version numbers
4. Add new patterns/constraints
5. Update documentation references

## File Maintenance

| File | Update Frequency | Priority |
|------|-----------------|----------|
| `.chatgpt-config.md` | Every major change | High |
| `.cursorrules` | When patterns change | High |
| `.claude-context.md` | Quarterly | Medium |
| `.gemini-context.md` | Quarterly | Medium |
| `.windsurf/context.md` | As needed | Low |
| `.aiderignore` | When structure changes | Low |

## Getting Started with AI Assistants

### Step 1: Choose Your AI Tool
Pick the AI coding assistant you want to use (ChatGPT, Cursor, Claude, etc.)

### Step 2: Load Context
- Most tools auto-detect context files in repository root
- Some may require manual reference (e.g., "refer to .chatgpt-config.md")

### Step 3: Verify Understanding
Ask the AI to summarize:
- "What tech stack does this project use?"
- "How should I handle database operations?"
- "What are the critical constraints?"

### Step 4: Start Coding
The AI should now:
- Follow project patterns
- Use correct dependency versions
- Suggest appropriate solutions
- Reference project documentation

## Common Issues

### AI suggests Flyway for migrations
**Fix**: Remind AI to check context file - project uses Rust migrations only


### AI uses `any` type in TypeScript
**Fix**: Reference TypeScript rules in context files - strict typing required

### AI forgets to use DatabaseFactory.dbQuery
**Fix**: Highlight backend pattern section in context files

## Quick Reference Commands

```bash
# Backend
./gradlew :modules:backend:api:run

# Frontend
cd modules/frontend/admin-web-react && bun install && bun run dev

# Database migrations
cd database/rust && cargo run migrate

# Mobile Android
./gradlew :androidApp:installDebug
```

## Documentation Hierarchy

1. **Context Files** (this directory) - AI assistant guidance
2. **application_documentation/** - Detailed specs and architecture
3. **README.md** - Project overview
4. **.github/copilot-instructions.md** - GitHub Copilot specific

## Contributing

When adding new context files:
1. Follow existing format patterns
2. Include all critical constraints
3. Add to this guide
4. Test with target AI tool
5. Update `.gitignore` if needed (ensure files are NOT ignored)

## Support

- **Issues with AI context**: Review and update relevant context file
- **New patterns**: Add to all relevant context files
- **Tech stack changes**: Update versions in all files
- **Questions**: Refer to `application_documentation/`

---

**Last Updated**: 2025-10-20  
**Maintained By**: Development Team
